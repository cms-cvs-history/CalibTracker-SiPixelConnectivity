process SiPixelFedCablingMapWriter = {

  include "CondCore/DBCommon/data/CondDBCommon.cfi"
  replace CondDBCommon.connect = "sqlite_file:cabling.db"
  replace CondDBCommon.catalog = "file:cablingCatalog.xml"

  source = EmptyIOVSource {
      string timetype = "runnumber"
      untracked uint32 firstRun = 1
      untracked uint32 lastRun = 1
      uint32 interval = 1
  }

  service = PoolDBOutputService{
    using CondDBCommon
    untracked bool loadBlobStreamer = false
    VPSet toPut={ {string record = "SiPixelFedCablingMap" string tag ="SiPixelFedCablingMap_v4"} }
  }


  # message logger
  service = MessageLogger {
    untracked vstring destinations = { "event.log", "error.log", "debug.log" }
   untracked PSet error.log = { 
         untracked string threshold = "WARNING" 
         untracked PSet default = { untracked int32 limit = -1 bool noLineBreaks = false } }
    untracked PSet event.log = { 
         untracked string threshold = "INFO"    
         untracked PSet default = { untracked int32 limit = -1 bool noLineBreaks = false } }
    untracked PSet debug.log = { 
         untracked string threshold = "DEBUG"   
         untracked PSet default = { untracked int32 limit = -1 bool noLineBreaks = false } }
    untracked vstring debugModules = { "*" }  // comment to inhibit ("time-consuming") debug verbosity
  }

  # Tracker SimGeometryXML
  include "Geometry/TrackerSimData/data/trackerSimGeometryXML.cfi"

  # Tracker Geometry Builder
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

  # Tracker Numbering Builder
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

  # converter to assign DetUnit to FED number
  es_module = PixelToLNKAssociateFromAsciiESProducer {
    string fileName = "pixelToLNK.ascii"                 // input txt file
  }

  module MapWriter = SiPixelFedCablingMapWriter {
    string record ="SiPixelFedCablingMap" 
    untracked string associator = "PixelToLNKAssociateFromAscii"  // converter to assign DetUnit to FED number
  }

  # provide a scheduler path
  path p = { MapWriter }      
}

